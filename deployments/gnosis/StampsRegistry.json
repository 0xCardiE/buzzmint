{
  "address": "0x27429910641560EF5308CF76027e05a674Ab0B70",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_swarmContractAddress",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "ApprovalFailed",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "TransferFailed",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "oldAdmin",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "newAdmin",
          "type": "address"
        }
      ],
      "name": "AdminTransferred",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "batchId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "totalAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "normalisedBalance",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "depth",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "bucketDepth",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "immutable_",
          "type": "bool"
        }
      ],
      "name": "BatchCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "batchId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "totalAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "normalisedBalance",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "depth",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "uint8",
          "name": "bucketDepth",
          "type": "uint8"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "immutable_",
          "type": "bool"
        }
      ],
      "name": "BatchMigrated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "oldAddress",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "newAddress",
          "type": "address"
        }
      ],
      "name": "SwarmContractUpdated",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "BZZ_TOKEN",
      "outputs": [
        {
          "internalType": "contract IERC20",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "admin",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "batchPayers",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_owner",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_nodeAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_initialBalancePerChunk",
          "type": "uint256"
        },
        {
          "internalType": "uint8",
          "name": "_depth",
          "type": "uint8"
        },
        {
          "internalType": "uint8",
          "name": "_bucketDepth",
          "type": "uint8"
        },
        {
          "internalType": "bytes32",
          "name": "_nonce",
          "type": "bytes32"
        },
        {
          "internalType": "bool",
          "name": "_immutable",
          "type": "bool"
        }
      ],
      "name": "createBatchRegistry",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_batchId",
          "type": "bytes32"
        }
      ],
      "name": "getBatchPayer",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_owner",
          "type": "address"
        }
      ],
      "name": "getOwnerBatchCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_owner",
          "type": "address"
        }
      ],
      "name": "getOwnerBatches",
      "outputs": [
        {
          "components": [
            {
              "internalType": "bytes32",
              "name": "batchId",
              "type": "bytes32"
            },
            {
              "internalType": "uint256",
              "name": "totalAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "normalisedBalance",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "nodeAddress",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "payer",
              "type": "address"
            },
            {
              "internalType": "uint8",
              "name": "depth",
              "type": "uint8"
            },
            {
              "internalType": "uint8",
              "name": "bucketDepth",
              "type": "uint8"
            },
            {
              "internalType": "bool",
              "name": "immutable_",
              "type": "bool"
            },
            {
              "internalType": "uint256",
              "name": "timestamp",
              "type": "uint256"
            }
          ],
          "internalType": "struct StampsRegistry.BatchInfo[]",
          "name": "",
          "type": "tuple[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_owner",
          "type": "address"
        },
        {
          "internalType": "bytes32",
          "name": "_batchId",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "_totalAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_normalisedBalance",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_nodeAddress",
          "type": "address"
        },
        {
          "internalType": "uint8",
          "name": "_depth",
          "type": "uint8"
        },
        {
          "internalType": "uint8",
          "name": "_bucketDepth",
          "type": "uint8"
        },
        {
          "internalType": "bool",
          "name": "_immutable",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "_timestamp",
          "type": "uint256"
        }
      ],
      "name": "migrateBatchRegistry",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "ownerBatches",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "batchId",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "totalAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "normalisedBalance",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "nodeAddress",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "payer",
          "type": "address"
        },
        {
          "internalType": "uint8",
          "name": "depth",
          "type": "uint8"
        },
        {
          "internalType": "uint8",
          "name": "bucketDepth",
          "type": "uint8"
        },
        {
          "internalType": "bool",
          "name": "immutable_",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "swarmStampContract",
      "outputs": [
        {
          "internalType": "contract ISwarmContract",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_newAdmin",
          "type": "address"
        }
      ],
      "name": "transferAdmin",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_newSwarmContractAddress",
          "type": "address"
        }
      ],
      "name": "updateSwarmContract",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x314912f2f201ad9814c1ecd7cfaf1471b7cc668e360c2e49f6ce7e6db14eb5b5",
  "receipt": {
    "to": null,
    "from": "0xb1C7F17Ed88189Abf269Bf68A3B2Ed83C5276aAe",
    "contractAddress": "0x27429910641560EF5308CF76027e05a674Ab0B70",
    "transactionIndex": 14,
    "gasUsed": "985833",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xf9295a98498fafbb77415ef33cada64fe963f72921ff5bda9d291e25a6193ff8",
    "transactionHash": "0x314912f2f201ad9814c1ecd7cfaf1471b7cc668e360c2e49f6ce7e6db14eb5b5",
    "logs": [],
    "blockNumber": 39947163,
    "cumulativeGasUsed": "2323054",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0x45a1502382541Cd610CC9068e88727426b696293"
  ],
  "numDeployments": 2,
  "solcInputHash": "9e842bb65bf6dbb9edb3dcf350a59aa8",
  "metadata": "{\"compiler\":{\"version\":\"0.8.23+commit.f704f362\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_swarmContractAddress\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"ApprovalFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"TransferFailed\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"oldAdmin\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"newAdmin\",\"type\":\"address\"}],\"name\":\"AdminTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"batchId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"totalAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"normalisedBalance\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"depth\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"bucketDepth\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"immutable_\",\"type\":\"bool\"}],\"name\":\"BatchCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"batchId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"totalAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"normalisedBalance\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"depth\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"bucketDepth\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"immutable_\",\"type\":\"bool\"}],\"name\":\"BatchMigrated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"oldAddress\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"newAddress\",\"type\":\"address\"}],\"name\":\"SwarmContractUpdated\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"BZZ_TOKEN\",\"outputs\":[{\"internalType\":\"contract IERC20\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"batchPayers\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_nodeAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_initialBalancePerChunk\",\"type\":\"uint256\"},{\"internalType\":\"uint8\",\"name\":\"_depth\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"_bucketDepth\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"_nonce\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"_immutable\",\"type\":\"bool\"}],\"name\":\"createBatchRegistry\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_batchId\",\"type\":\"bytes32\"}],\"name\":\"getBatchPayer\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"getOwnerBatchCount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"getOwnerBatches\",\"outputs\":[{\"components\":[{\"internalType\":\"bytes32\",\"name\":\"batchId\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"totalAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"normalisedBalance\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"nodeAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"depth\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"bucketDepth\",\"type\":\"uint8\"},{\"internalType\":\"bool\",\"name\":\"immutable_\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"}],\"internalType\":\"struct StampsRegistry.BatchInfo[]\",\"name\":\"\",\"type\":\"tuple[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"_batchId\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_totalAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_normalisedBalance\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_nodeAddress\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"_depth\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"_bucketDepth\",\"type\":\"uint8\"},{\"internalType\":\"bool\",\"name\":\"_immutable\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"_timestamp\",\"type\":\"uint256\"}],\"name\":\"migrateBatchRegistry\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"ownerBatches\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"batchId\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"totalAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"normalisedBalance\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"nodeAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"payer\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"depth\",\"type\":\"uint8\"},{\"internalType\":\"uint8\",\"name\":\"bucketDepth\",\"type\":\"uint8\"},{\"internalType\":\"bool\",\"name\":\"immutable_\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"swarmStampContract\",\"outputs\":[{\"internalType\":\"contract ISwarmContract\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_newAdmin\",\"type\":\"address\"}],\"name\":\"transferAdmin\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_newSwarmContractAddress\",\"type\":\"address\"}],\"name\":\"updateSwarmContract\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"createBatchRegistry(address,address,uint256,uint8,uint8,bytes32,bool)\":{\"params\":{\"_bucketDepth\":\"Bucket depth\",\"_depth\":\"Depth of the batch\",\"_immutable\":\"Whether the batch is immutable\",\"_initialBalancePerChunk\":\"Initial balance per chunk\",\"_nodeAddress\":\"Address of the node that will own the batch\",\"_nonce\":\"Unique nonce for the batch\",\"_owner\":\"Address that pays for the batch, but not the owner of the batch\"}},\"getBatchPayer(bytes32)\":{\"params\":{\"_batchId\":\"The ID of the batch\"},\"returns\":{\"_0\":\"The address of the payer\"}},\"getOwnerBatchCount(address)\":{\"params\":{\"_owner\":\"The address of the owner\"},\"returns\":{\"_0\":\"The number of batches\"}},\"getOwnerBatches(address)\":{\"params\":{\"_owner\":\"The address of the owner\"},\"returns\":{\"_0\":\"Array of BatchInfo for the owner\"}},\"migrateBatchRegistry(address,bytes32,uint256,uint256,address,uint8,uint8,bool,uint256)\":{\"params\":{\"_batchId\":\"Batch ID from the old contract\",\"_bucketDepth\":\"Bucket depth from the old batch\",\"_depth\":\"Depth from the old batch\",\"_immutable\":\"Immutable flag from the old batch\",\"_nodeAddress\":\"Node address from the old batch\",\"_normalisedBalance\":\"Normalised balance from the old batch\",\"_owner\":\"Address that owns the batch\",\"_timestamp\":\"Original timestamp from the old batch\",\"_totalAmount\":\"Total amount from the old batch\"}},\"transferAdmin(address)\":{\"params\":{\"_newAdmin\":\"The address of the new admin\"}},\"updateSwarmContract(address)\":{\"params\":{\"_newSwarmContractAddress\":\"New address of the swarm contract\"}}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"createBatchRegistry(address,address,uint256,uint8,uint8,bytes32,bool)\":{\"notice\":\"Creates a new batch and registers the payer\"},\"getBatchPayer(bytes32)\":{\"notice\":\"Get the payer address for a specific batch ID\"},\"getOwnerBatchCount(address)\":{\"notice\":\"Get the number of batches for a specific owner\"},\"getOwnerBatches(address)\":{\"notice\":\"Get all batches for a specific owner\"},\"migrateBatchRegistry(address,bytes32,uint256,uint256,address,uint8,uint8,bool,uint256)\":{\"notice\":\"Migrate batch data from old contract without performing token transfers\"},\"transferAdmin(address)\":{\"notice\":\"Transfer admin rights to a new address\"},\"updateSwarmContract(address)\":{\"notice\":\"Updates the swarm contract address\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/StampsRegistry.sol\":\"StampsRegistry\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/StampsRegistry.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.23;\\n\\n/*\\n    \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2588\\u2557   \\u2588\\u2588\\u2588\\u2557\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557\\n    \\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u2550\\u255d\\u255a\\u2550\\u2550\\u2588\\u2588\\u2554\\u2550\\u2550\\u255d\\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2557\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2588\\u2588\\u2551\\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2557\\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u2550\\u255d\\n    \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557   \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2551\\u2588\\u2588\\u2554\\u2588\\u2588\\u2588\\u2588\\u2554\\u2588\\u2588\\u2551\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557\\n    \\u255a\\u2550\\u2550\\u2550\\u2550\\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2551\\u2588\\u2588\\u2551\\u255a\\u2588\\u2588\\u2554\\u255d\\u2588\\u2588\\u2551\\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u255d \\u255a\\u2550\\u2550\\u2550\\u2550\\u2588\\u2588\\u2551\\n    \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551  \\u2588\\u2588\\u2551\\u2588\\u2588\\u2551 \\u255a\\u2550\\u255d \\u2588\\u2588\\u2551\\u2588\\u2588\\u2551     \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2551\\n    \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d   \\u255a\\u2550\\u255d   \\u255a\\u2550\\u255d  \\u255a\\u2550\\u255d\\u255a\\u2550\\u255d     \\u255a\\u2550\\u255d\\u255a\\u2550\\u255d     \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d\\n                                              \\n    \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2557\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2557   \\u2588\\u2588\\u2557\\n    \\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2557\\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u2550\\u255d\\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u2550\\u255d \\u2588\\u2588\\u2551\\u2588\\u2588\\u2554\\u2550\\u2550\\u2550\\u2550\\u255d\\u255a\\u2550\\u2550\\u2588\\u2588\\u2554\\u2550\\u2550\\u255d\\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2557\\u255a\\u2588\\u2588\\u2557 \\u2588\\u2588\\u2554\\u255d\\n    \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557  \\u2588\\u2588\\u2551  \\u2588\\u2588\\u2588\\u2557\\u2588\\u2588\\u2551\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557   \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d \\u255a\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d \\n    \\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2557\\u2588\\u2588\\u2554\\u2550\\u2550\\u255d  \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551\\u2588\\u2588\\u2551\\u255a\\u2550\\u2550\\u2550\\u2550\\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2554\\u2550\\u2550\\u2588\\u2588\\u2557  \\u255a\\u2588\\u2588\\u2554\\u255d  \\n    \\u2588\\u2588\\u2551  \\u2588\\u2588\\u2551\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2557\\u255a\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2554\\u255d\\u2588\\u2588\\u2551\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551  \\u2588\\u2588\\u2551   \\u2588\\u2588\\u2551   \\n    \\u255a\\u2550\\u255d  \\u255a\\u2550\\u255d\\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d \\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d \\u255a\\u2550\\u255d\\u255a\\u2550\\u2550\\u2550\\u2550\\u2550\\u2550\\u255d   \\u255a\\u2550\\u255d   \\u255a\\u2550\\u255d  \\u255a\\u2550\\u255d   \\u255a\\u2550\\u255d   \\n*/\\n\\n/**\\n * @title StampsRegistry\\n * @notice A registry for Swarm Postage Stamps\\n * @dev Note on naming convention: The terms \\\"Batch\\\" and \\\"Stamps\\\" are used interchangeably throughout the codebase.\\n *      \\\"Batch\\\" refers to a collection of stamps created in a single transaction and is the terminology used in the\\n *      Swarm protocol. \\\"Stamps\\\" is a more user-friendly term used to describe the same concept.\\n *      For example: \\\"BatchCreated\\\" event, but \\\"StampsRegistry\\\" contract.\\n */\\n\\ninterface ISwarmContract {\\n    function createBatch(\\n        address _owner,\\n        uint256 _initialBalancePerChunk,\\n        uint8 _depth,\\n        uint8 _bucketDepth,\\n        bytes32 _nonce,\\n        bool _immutable\\n    ) external;\\n\\n    function currentTotalOutPayment() external view returns (uint256);\\n}\\n\\ninterface IERC20 {\\n    function transferFrom(\\n        address sender,\\n        address recipient,\\n        uint256 amount\\n    ) external returns (bool);\\n\\n    function approve(address spender, uint256 amount) external returns (bool);\\n}\\n\\ncontract StampsRegistry {\\n    // State variables\\n    ISwarmContract public swarmStampContract;\\n    IERC20 public constant BZZ_TOKEN =\\n        IERC20(0xdBF3Ea6F5beE45c02255B2c26a16F300502F68da);\\n    mapping(bytes32 => address) public batchPayers;\\n    address public admin;\\n    \\n    // New data structure to store batch information by owner\\n    struct BatchInfo {\\n        bytes32 batchId;\\n        uint256 totalAmount;\\n        uint256 normalisedBalance;\\n        address nodeAddress;\\n        address payer;\\n        uint8 depth;\\n        uint8 bucketDepth;\\n        bool immutable_;\\n        uint256 timestamp;\\n    }\\n    \\n    // Mapping from owner address to array of BatchInfo\\n    mapping(address => BatchInfo[]) public ownerBatches;\\n    \\n    // Events\\n    event BatchCreated(\\n        bytes32 indexed batchId,\\n        uint256 totalAmount,\\n        uint256 normalisedBalance,\\n        address indexed owner,\\n        address indexed payer,\\n        uint8 depth,\\n        uint8 bucketDepth,\\n        bool immutable_\\n    );\\n\\n    event BatchMigrated(\\n        bytes32 indexed batchId,\\n        uint256 totalAmount,\\n        uint256 normalisedBalance,\\n        address indexed owner,\\n        address indexed payer,\\n        uint8 depth,\\n        uint8 bucketDepth,\\n        bool immutable_\\n    );\\n    event SwarmContractUpdated(address oldAddress, address newAddress);\\n    event AdminTransferred(address oldAdmin, address newAdmin);\\n\\n    // Custom errors\\n    error TransferFailed();\\n    error ApprovalFailed();\\n\\n    // Modifiers\\n    modifier onlyAdmin() {\\n        require(msg.sender == admin, \\\"Only admin can call this function\\\");\\n        _;\\n    }\\n\\n    constructor(address _swarmContractAddress) {\\n        swarmStampContract = ISwarmContract(_swarmContractAddress);\\n        admin = msg.sender;\\n    }\\n\\n    ////////////////////////////////////////\\n    //              SETTERS               //\\n    ////////////////////////////////////////\\n\\n    /**\\n     * @notice Transfer admin rights to a new address\\n     * @param _newAdmin The address of the new admin\\n     */\\n    function transferAdmin(address _newAdmin) external onlyAdmin {\\n        require(_newAdmin != address(0), \\\"New admin cannot be the zero address\\\");\\n        address oldAdmin = admin;\\n        admin = _newAdmin;\\n        emit AdminTransferred(oldAdmin, _newAdmin);\\n    }\\n\\n    /**\\n     * @notice Updates the swarm contract address\\n     * @param _newSwarmContractAddress New address of the swarm contract\\n     */\\n    function updateSwarmContract(\\n        address _newSwarmContractAddress\\n    ) external onlyAdmin {\\n        address oldAddress = address(swarmStampContract);\\n        swarmStampContract = ISwarmContract(_newSwarmContractAddress);\\n        emit SwarmContractUpdated(oldAddress, _newSwarmContractAddress);\\n    }\\n\\n    /**\\n     * @notice Migrate batch data from old contract without performing token transfers\\n     * @param _owner Address that owns the batch\\n     * @param _batchId Batch ID from the old contract\\n     * @param _totalAmount Total amount from the old batch\\n     * @param _normalisedBalance Normalised balance from the old batch\\n     * @param _nodeAddress Node address from the old batch\\n     * @param _depth Depth from the old batch\\n     * @param _bucketDepth Bucket depth from the old batch\\n     * @param _immutable Immutable flag from the old batch\\n     * @param _timestamp Original timestamp from the old batch\\n     */\\n    function migrateBatchRegistry(\\n        address _owner,\\n        bytes32 _batchId,\\n        uint256 _totalAmount,\\n        uint256 _normalisedBalance,\\n        address _nodeAddress,\\n        uint8 _depth,\\n        uint8 _bucketDepth,\\n        bool _immutable,\\n        uint256 _timestamp\\n    ) external onlyAdmin {\\n        // Store the payer information\\n        batchPayers[_batchId] = _owner;\\n            \\n        // Store batch information in the owner's batches array\\n        ownerBatches[_owner].push(BatchInfo({\\n            batchId: _batchId,\\n            totalAmount: _totalAmount,\\n            normalisedBalance: _normalisedBalance,\\n            nodeAddress: _nodeAddress,\\n            payer: _owner,\\n            depth: _depth,\\n            bucketDepth: _bucketDepth,\\n            immutable_: _immutable,\\n            timestamp: _timestamp\\n        }));\\n\\n        // Emit the batch migration event\\n        emit BatchMigrated(\\n            _batchId,\\n            _totalAmount,\\n            _normalisedBalance,\\n            _nodeAddress,\\n            _owner,\\n            _depth,\\n            _bucketDepth,\\n            _immutable\\n        );\\n    }\\n\\n    /**\\n     * @notice Creates a new batch and registers the payer\\n     * @param _owner Address that pays for the batch, but not the owner of the batch\\n     * @param _nodeAddress Address of the node that will own the batch\\n     * @param _initialBalancePerChunk Initial balance per chunk\\n     * @param _depth Depth of the batch\\n     * @param _bucketDepth Bucket depth\\n     * @param _nonce Unique nonce for the batch\\n     * @param _immutable Whether the batch is immutable\\n     */\\n    function createBatchRegistry(\\n        address _owner,\\n        address _nodeAddress,\\n        uint256 _initialBalancePerChunk,\\n        uint8 _depth,\\n        uint8 _bucketDepth,\\n        bytes32 _nonce,\\n        bool _immutable\\n    ) external {\\n        // Calculate total amount\\n        uint256 totalAmount = _initialBalancePerChunk * (1 << _depth);\\n\\n        // Transfer BZZ tokens from sender to this contract\\n        if (!BZZ_TOKEN.transferFrom(msg.sender, address(this), totalAmount)) {\\n            revert TransferFailed();\\n        }\\n\\n        // Approve swarmStampContract to spend the BZZ tokens\\n        if (!BZZ_TOKEN.approve(address(swarmStampContract), totalAmount)) {\\n            revert ApprovalFailed();\\n        }\\n\\n        // Call the original swarm contract with nodeAddress as owner\\n        swarmStampContract.createBatch(\\n            _nodeAddress,\\n            _initialBalancePerChunk,\\n            _depth,\\n            _bucketDepth,\\n            _nonce,\\n            _immutable\\n        );\\n\\n        // Calculate batchId as bytes32\\n        bytes32 batchId = keccak256(abi.encode(address(this), _nonce));\\n\\n        // Store the payer information\\n        batchPayers[batchId] = _owner;\\n\\n        // Get normalized balance\\n        uint256 normalisedBalance = swarmStampContract\\n            .currentTotalOutPayment() + _initialBalancePerChunk;\\n            \\n        // Store batch information in the owner's batches array\\n        ownerBatches[_owner].push(BatchInfo({\\n            batchId: batchId,\\n            totalAmount: totalAmount,\\n            normalisedBalance: normalisedBalance,\\n            nodeAddress: _nodeAddress,\\n            payer: _owner,\\n            depth: _depth,\\n            bucketDepth: _bucketDepth,\\n            immutable_: _immutable,\\n            timestamp: block.timestamp\\n        }));\\n\\n        // Emit the batch creation event\\n        emit BatchCreated(\\n            batchId,\\n            totalAmount,\\n            normalisedBalance,\\n            _nodeAddress,\\n            _owner,\\n            _depth,\\n            _bucketDepth,\\n            _immutable\\n        );\\n    }\\n\\n    ////////////////////////////////////////\\n    //              GETTERS               //\\n    ////////////////////////////////////////\\n\\n    /**\\n     * @notice Get the payer address for a specific batch ID\\n     * @param _batchId The ID of the batch\\n     * @return The address of the payer\\n     */\\n    function getBatchPayer(bytes32 _batchId) external view returns (address) {\\n        return batchPayers[_batchId];\\n    }\\n    \\n    /**\\n     * @notice Get all batches for a specific owner\\n     * @param _owner The address of the owner\\n     * @return Array of BatchInfo for the owner\\n     */\\n    function getOwnerBatches(address _owner) external view returns (BatchInfo[] memory) {\\n        return ownerBatches[_owner];\\n    }\\n    \\n    /**\\n     * @notice Get the number of batches for a specific owner\\n     * @param _owner The address of the owner\\n     * @return The number of batches\\n     */\\n    function getOwnerBatchCount(address _owner) external view returns (uint256) {\\n        return ownerBatches[_owner].length;\\n    }\\n}\\n\",\"keccak256\":\"0x6f0511babb2bcbea6232a272bae4c0ce101cbe496d57832d92e21ac5dedd2593\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b506040516110a23803806110a283398101604081905261002f9161005d565b600080546001600160a01b039092166001600160a01b0319928316179055600280549091163317905561008d565b60006020828403121561006f57600080fd5b81516001600160a01b038116811461008657600080fd5b9392505050565b6110068061009c6000396000f3fe608060405234801561001057600080fd5b50600436106100b45760003560e01c8063883134941161007157806388313494146101d9578063ae268816146101ec578063b0099620146101ff578063e1e1edfc14610228578063f851a44014610243578063fa031f841461025657600080fd5b80632ff190d6146100b9578063302fb0ca146100ce57806335f7447b1461010a5780635e9b3ac11461014b57806368a26f9f146101b357806375829def146101c6575b600080fd5b6100cc6100c7366004610cec565b610276565b005b6100f76100dc366004610d68565b6001600160a01b031660009081526003602052604090205490565b6040519081526020015b60405180910390f35b610133610118366004610d8a565b6001602052600090815260409020546001600160a01b031681565b6040516001600160a01b039091168152602001610101565b61015e610159366004610da3565b610753565b60408051998a5260208a0198909852968801959095526001600160a01b03938416606088015292909116608086015260ff90811660a08601521660c0840152151560e083015261010082015261012001610101565b6100cc6101c1366004610dcd565b6107d7565b6100cc6101d4366004610d68565b610a53565b600054610133906001600160a01b031681565b6100cc6101fa366004610d68565b610b41565b61013361020d366004610d8a565b6000908152600160205260409020546001600160a01b031690565b61013373dbf3ea6f5bee45c02255b2c26a16f300502f68da81565b600254610133906001600160a01b031681565b610269610264366004610d68565b610bc5565b6040516101019190610e5d565b6000610288600160ff87161b87610f29565b6040516323b872dd60e01b81523360048201523060248201526044810182905290915073dbf3ea6f5bee45c02255b2c26a16f300502f68da906323b872dd906064016020604051808303816000875af11580156102e9573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061030d9190610f46565b61032a576040516312171d8360e31b815260040160405180910390fd5b60005460405163095ea7b360e01b81526001600160a01b0390911660048201526024810182905273dbf3ea6f5bee45c02255b2c26a16f300502f68da9063095ea7b3906044016020604051808303816000875af115801561038f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103b39190610f46565b6103d0576040516340b27c2160e11b815260040160405180910390fd5b600054604051635239af7160e01b81526001600160a01b0389811660048301526024820189905260ff8089166044840152871660648301526084820186905284151560a483015290911690635239af719060c401600060405180830381600087803b15801561043e57600080fd5b505af1158015610452573d6000803e3d6000fd5b505060408051306020820152908101869052600092506060019050604051602081830303815290604052805190602001209050886001600083815260200190815260200160002060006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060008760008054906101000a90046001600160a01b03166001600160a01b03166351b17cd06040518163ffffffff1660e01b8152600401602060405180830381865afa158015610511573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105359190610f63565b61053f9190610f7c565b9050600360008b6001600160a01b03166001600160a01b031681526020019081526020016000206040518061012001604052808481526020018581526020018381526020018b6001600160a01b031681526020018c6001600160a01b031681526020018960ff1681526020018860ff168152602001861515815260200142815250908060018154018082558091505060019003906000526020600020906006020160009091909190915060008201518160000155602082015181600101556040820151816002015560608201518160030160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060808201518160040160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060a08201518160040160146101000a81548160ff021916908360ff16021790555060c08201518160040160156101000a81548160ff021916908360ff16021790555060e08201518160040160166101000a81548160ff02191690831515021790555061010082015181600501555050896001600160a01b0316896001600160a01b0316837fc56374a8e3361770343efe343883bf87efaeca24024afbba9062b88495f50f6e86858c8c8b60405161073f959493929190948552602085019390935260ff91821660408501521660608301521515608082015260a00190565b60405180910390a450505050505050505050565b6003602052816000526040600020818154811061076f57600080fd5b6000918252602090912060069091020180546001820154600283015460038401546004850154600590950154939650919450926001600160a01b03918216929181169160ff600160a01b8304811692600160a81b8104821692600160b01b9091049091169089565b6002546001600160a01b0316331461080a5760405162461bcd60e51b815260040161080190610f8f565b60405180910390fd5b88600160008a815260200190815260200160002060006101000a8154816001600160a01b0302191690836001600160a01b03160217905550600360008a6001600160a01b03166001600160a01b031681526020019081526020016000206040518061012001604052808a8152602001898152602001888152602001876001600160a01b031681526020018b6001600160a01b031681526020018660ff1681526020018560ff168152602001841515815260200183815250908060018154018082558091505060019003906000526020600020906006020160009091909190915060008201518160000155602082015181600101556040820151816002015560608201518160030160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060808201518160040160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060a08201518160040160146101000a81548160ff021916908360ff16021790555060c08201518160040160156101000a81548160ff021916908360ff16021790555060e08201518160040160166101000a81548160ff02191690831515021790555061010082015181600501555050886001600160a01b0316856001600160a01b0316897f048eb855e673d9441d2d3305af4e1feaf7c2e0805c372d702d88de09af80e1cb8a8a898989604051610a40959493929190948552602085019390935260ff91821660408501521660608301521515608082015260a00190565b60405180910390a4505050505050505050565b6002546001600160a01b03163314610a7d5760405162461bcd60e51b815260040161080190610f8f565b6001600160a01b038116610adf5760405162461bcd60e51b8152602060048201526024808201527f4e65772061646d696e2063616e6e6f7420626520746865207a65726f206164646044820152637265737360e01b6064820152608401610801565b600280546001600160a01b038381166001600160a01b031983168117909355604080519190921680825260208201939093527ff8ccb027dfcd135e000e9d45e6cc2d662578a8825d4c45b5e32e0adf67e79ec691015b60405180910390a15050565b6002546001600160a01b03163314610b6b5760405162461bcd60e51b815260040161080190610f8f565b600080546001600160a01b038381166001600160a01b031983168117909355604080519190921680825260208201939093527f470ea4ad511ce9155b66f263468d8b2d8bb80ddc9d3fe333d69feea9b7bb496f9101610b35565b6001600160a01b0381166000908152600360209081526040808320805482518185028101850190935280835260609492939192909184015b82821015610ca3576000848152602090819020604080516101208101825260068602909201805483526001808201548486015260028201549284019290925260038101546001600160a01b0390811660608501526004820154908116608085015260ff600160a01b8204811660a0860152600160a81b8204811660c0860152600160b01b90910416151560e0840152600501546101008301529083529092019101610bfd565b505050509050919050565b80356001600160a01b0381168114610cc557600080fd5b919050565b803560ff81168114610cc557600080fd5b8015158114610ce957600080fd5b50565b600080600080600080600060e0888a031215610d0757600080fd5b610d1088610cae565b9650610d1e60208901610cae565b955060408801359450610d3360608901610cca565b9350610d4160808901610cca565b925060a0880135915060c0880135610d5881610cdb565b8091505092959891949750929550565b600060208284031215610d7a57600080fd5b610d8382610cae565b9392505050565b600060208284031215610d9c57600080fd5b5035919050565b60008060408385031215610db657600080fd5b610dbf83610cae565b946020939093013593505050565b60008060008060008060008060006101208a8c031215610dec57600080fd5b610df58a610cae565b985060208a0135975060408a0135965060608a01359550610e1860808b01610cae565b9450610e2660a08b01610cca565b9350610e3460c08b01610cca565b925060e08a0135610e4481610cdb565b809250506101008a013590509295985092959850929598565b602080825282518282018190526000919060409081850190868401855b82811015610f0657815180518552868101518786015285810151868601526060808201516001600160a01b03908116918701919091526080808301519091169086015260a08082015160ff9081169187019190915260c0808301519091169086015260e08082015115159086015261010090810151908501526101209093019290850190600101610e7a565b5091979650505050505050565b634e487b7160e01b600052601160045260246000fd5b8082028115828204841417610f4057610f40610f13565b92915050565b600060208284031215610f5857600080fd5b8151610d8381610cdb565b600060208284031215610f7557600080fd5b5051919050565b80820180821115610f4057610f40610f13565b60208082526021908201527f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f6040820152603760f91b60608201526080019056fea264697066735822122000e12cee4a2fd6cf99304c2085dbe587ba1de2637da4087dfcef8b720224d64464736f6c63430008170033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100b45760003560e01c8063883134941161007157806388313494146101d9578063ae268816146101ec578063b0099620146101ff578063e1e1edfc14610228578063f851a44014610243578063fa031f841461025657600080fd5b80632ff190d6146100b9578063302fb0ca146100ce57806335f7447b1461010a5780635e9b3ac11461014b57806368a26f9f146101b357806375829def146101c6575b600080fd5b6100cc6100c7366004610cec565b610276565b005b6100f76100dc366004610d68565b6001600160a01b031660009081526003602052604090205490565b6040519081526020015b60405180910390f35b610133610118366004610d8a565b6001602052600090815260409020546001600160a01b031681565b6040516001600160a01b039091168152602001610101565b61015e610159366004610da3565b610753565b60408051998a5260208a0198909852968801959095526001600160a01b03938416606088015292909116608086015260ff90811660a08601521660c0840152151560e083015261010082015261012001610101565b6100cc6101c1366004610dcd565b6107d7565b6100cc6101d4366004610d68565b610a53565b600054610133906001600160a01b031681565b6100cc6101fa366004610d68565b610b41565b61013361020d366004610d8a565b6000908152600160205260409020546001600160a01b031690565b61013373dbf3ea6f5bee45c02255b2c26a16f300502f68da81565b600254610133906001600160a01b031681565b610269610264366004610d68565b610bc5565b6040516101019190610e5d565b6000610288600160ff87161b87610f29565b6040516323b872dd60e01b81523360048201523060248201526044810182905290915073dbf3ea6f5bee45c02255b2c26a16f300502f68da906323b872dd906064016020604051808303816000875af11580156102e9573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061030d9190610f46565b61032a576040516312171d8360e31b815260040160405180910390fd5b60005460405163095ea7b360e01b81526001600160a01b0390911660048201526024810182905273dbf3ea6f5bee45c02255b2c26a16f300502f68da9063095ea7b3906044016020604051808303816000875af115801561038f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103b39190610f46565b6103d0576040516340b27c2160e11b815260040160405180910390fd5b600054604051635239af7160e01b81526001600160a01b0389811660048301526024820189905260ff8089166044840152871660648301526084820186905284151560a483015290911690635239af719060c401600060405180830381600087803b15801561043e57600080fd5b505af1158015610452573d6000803e3d6000fd5b505060408051306020820152908101869052600092506060019050604051602081830303815290604052805190602001209050886001600083815260200190815260200160002060006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060008760008054906101000a90046001600160a01b03166001600160a01b03166351b17cd06040518163ffffffff1660e01b8152600401602060405180830381865afa158015610511573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105359190610f63565b61053f9190610f7c565b9050600360008b6001600160a01b03166001600160a01b031681526020019081526020016000206040518061012001604052808481526020018581526020018381526020018b6001600160a01b031681526020018c6001600160a01b031681526020018960ff1681526020018860ff168152602001861515815260200142815250908060018154018082558091505060019003906000526020600020906006020160009091909190915060008201518160000155602082015181600101556040820151816002015560608201518160030160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060808201518160040160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060a08201518160040160146101000a81548160ff021916908360ff16021790555060c08201518160040160156101000a81548160ff021916908360ff16021790555060e08201518160040160166101000a81548160ff02191690831515021790555061010082015181600501555050896001600160a01b0316896001600160a01b0316837fc56374a8e3361770343efe343883bf87efaeca24024afbba9062b88495f50f6e86858c8c8b60405161073f959493929190948552602085019390935260ff91821660408501521660608301521515608082015260a00190565b60405180910390a450505050505050505050565b6003602052816000526040600020818154811061076f57600080fd5b6000918252602090912060069091020180546001820154600283015460038401546004850154600590950154939650919450926001600160a01b03918216929181169160ff600160a01b8304811692600160a81b8104821692600160b01b9091049091169089565b6002546001600160a01b0316331461080a5760405162461bcd60e51b815260040161080190610f8f565b60405180910390fd5b88600160008a815260200190815260200160002060006101000a8154816001600160a01b0302191690836001600160a01b03160217905550600360008a6001600160a01b03166001600160a01b031681526020019081526020016000206040518061012001604052808a8152602001898152602001888152602001876001600160a01b031681526020018b6001600160a01b031681526020018660ff1681526020018560ff168152602001841515815260200183815250908060018154018082558091505060019003906000526020600020906006020160009091909190915060008201518160000155602082015181600101556040820151816002015560608201518160030160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060808201518160040160006101000a8154816001600160a01b0302191690836001600160a01b0316021790555060a08201518160040160146101000a81548160ff021916908360ff16021790555060c08201518160040160156101000a81548160ff021916908360ff16021790555060e08201518160040160166101000a81548160ff02191690831515021790555061010082015181600501555050886001600160a01b0316856001600160a01b0316897f048eb855e673d9441d2d3305af4e1feaf7c2e0805c372d702d88de09af80e1cb8a8a898989604051610a40959493929190948552602085019390935260ff91821660408501521660608301521515608082015260a00190565b60405180910390a4505050505050505050565b6002546001600160a01b03163314610a7d5760405162461bcd60e51b815260040161080190610f8f565b6001600160a01b038116610adf5760405162461bcd60e51b8152602060048201526024808201527f4e65772061646d696e2063616e6e6f7420626520746865207a65726f206164646044820152637265737360e01b6064820152608401610801565b600280546001600160a01b038381166001600160a01b031983168117909355604080519190921680825260208201939093527ff8ccb027dfcd135e000e9d45e6cc2d662578a8825d4c45b5e32e0adf67e79ec691015b60405180910390a15050565b6002546001600160a01b03163314610b6b5760405162461bcd60e51b815260040161080190610f8f565b600080546001600160a01b038381166001600160a01b031983168117909355604080519190921680825260208201939093527f470ea4ad511ce9155b66f263468d8b2d8bb80ddc9d3fe333d69feea9b7bb496f9101610b35565b6001600160a01b0381166000908152600360209081526040808320805482518185028101850190935280835260609492939192909184015b82821015610ca3576000848152602090819020604080516101208101825260068602909201805483526001808201548486015260028201549284019290925260038101546001600160a01b0390811660608501526004820154908116608085015260ff600160a01b8204811660a0860152600160a81b8204811660c0860152600160b01b90910416151560e0840152600501546101008301529083529092019101610bfd565b505050509050919050565b80356001600160a01b0381168114610cc557600080fd5b919050565b803560ff81168114610cc557600080fd5b8015158114610ce957600080fd5b50565b600080600080600080600060e0888a031215610d0757600080fd5b610d1088610cae565b9650610d1e60208901610cae565b955060408801359450610d3360608901610cca565b9350610d4160808901610cca565b925060a0880135915060c0880135610d5881610cdb565b8091505092959891949750929550565b600060208284031215610d7a57600080fd5b610d8382610cae565b9392505050565b600060208284031215610d9c57600080fd5b5035919050565b60008060408385031215610db657600080fd5b610dbf83610cae565b946020939093013593505050565b60008060008060008060008060006101208a8c031215610dec57600080fd5b610df58a610cae565b985060208a0135975060408a0135965060608a01359550610e1860808b01610cae565b9450610e2660a08b01610cca565b9350610e3460c08b01610cca565b925060e08a0135610e4481610cdb565b809250506101008a013590509295985092959850929598565b602080825282518282018190526000919060409081850190868401855b82811015610f0657815180518552868101518786015285810151868601526060808201516001600160a01b03908116918701919091526080808301519091169086015260a08082015160ff9081169187019190915260c0808301519091169086015260e08082015115159086015261010090810151908501526101209093019290850190600101610e7a565b5091979650505050505050565b634e487b7160e01b600052601160045260246000fd5b8082028115828204841417610f4057610f40610f13565b92915050565b600060208284031215610f5857600080fd5b8151610d8381610cdb565b600060208284031215610f7557600080fd5b5051919050565b80820180821115610f4057610f40610f13565b60208082526021908201527f4f6e6c792061646d696e2063616e2063616c6c20746869732066756e6374696f6040820152603760f91b60608201526080019056fea264697066735822122000e12cee4a2fd6cf99304c2085dbe587ba1de2637da4087dfcef8b720224d64464736f6c63430008170033",
  "devdoc": {
    "kind": "dev",
    "methods": {
      "createBatchRegistry(address,address,uint256,uint8,uint8,bytes32,bool)": {
        "params": {
          "_bucketDepth": "Bucket depth",
          "_depth": "Depth of the batch",
          "_immutable": "Whether the batch is immutable",
          "_initialBalancePerChunk": "Initial balance per chunk",
          "_nodeAddress": "Address of the node that will own the batch",
          "_nonce": "Unique nonce for the batch",
          "_owner": "Address that pays for the batch, but not the owner of the batch"
        }
      },
      "getBatchPayer(bytes32)": {
        "params": {
          "_batchId": "The ID of the batch"
        },
        "returns": {
          "_0": "The address of the payer"
        }
      },
      "getOwnerBatchCount(address)": {
        "params": {
          "_owner": "The address of the owner"
        },
        "returns": {
          "_0": "The number of batches"
        }
      },
      "getOwnerBatches(address)": {
        "params": {
          "_owner": "The address of the owner"
        },
        "returns": {
          "_0": "Array of BatchInfo for the owner"
        }
      },
      "migrateBatchRegistry(address,bytes32,uint256,uint256,address,uint8,uint8,bool,uint256)": {
        "params": {
          "_batchId": "Batch ID from the old contract",
          "_bucketDepth": "Bucket depth from the old batch",
          "_depth": "Depth from the old batch",
          "_immutable": "Immutable flag from the old batch",
          "_nodeAddress": "Node address from the old batch",
          "_normalisedBalance": "Normalised balance from the old batch",
          "_owner": "Address that owns the batch",
          "_timestamp": "Original timestamp from the old batch",
          "_totalAmount": "Total amount from the old batch"
        }
      },
      "transferAdmin(address)": {
        "params": {
          "_newAdmin": "The address of the new admin"
        }
      },
      "updateSwarmContract(address)": {
        "params": {
          "_newSwarmContractAddress": "New address of the swarm contract"
        }
      }
    },
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "createBatchRegistry(address,address,uint256,uint8,uint8,bytes32,bool)": {
        "notice": "Creates a new batch and registers the payer"
      },
      "getBatchPayer(bytes32)": {
        "notice": "Get the payer address for a specific batch ID"
      },
      "getOwnerBatchCount(address)": {
        "notice": "Get the number of batches for a specific owner"
      },
      "getOwnerBatches(address)": {
        "notice": "Get all batches for a specific owner"
      },
      "migrateBatchRegistry(address,bytes32,uint256,uint256,address,uint8,uint8,bool,uint256)": {
        "notice": "Migrate batch data from old contract without performing token transfers"
      },
      "transferAdmin(address)": {
        "notice": "Transfer admin rights to a new address"
      },
      "updateSwarmContract(address)": {
        "notice": "Updates the swarm contract address"
      }
    },
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 47,
        "contract": "contracts/StampsRegistry.sol:StampsRegistry",
        "label": "swarmStampContract",
        "offset": 0,
        "slot": "0",
        "type": "t_contract(ISwarmContract)23"
      },
      {
        "astId": 57,
        "contract": "contracts/StampsRegistry.sol:StampsRegistry",
        "label": "batchPayers",
        "offset": 0,
        "slot": "1",
        "type": "t_mapping(t_bytes32,t_address)"
      },
      {
        "astId": 59,
        "contract": "contracts/StampsRegistry.sol:StampsRegistry",
        "label": "admin",
        "offset": 0,
        "slot": "2",
        "type": "t_address"
      },
      {
        "astId": 84,
        "contract": "contracts/StampsRegistry.sol:StampsRegistry",
        "label": "ownerBatches",
        "offset": 0,
        "slot": "3",
        "type": "t_mapping(t_address,t_array(t_struct(BatchInfo)78_storage)dyn_storage)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_struct(BatchInfo)78_storage)dyn_storage": {
        "base": "t_struct(BatchInfo)78_storage",
        "encoding": "dynamic_array",
        "label": "struct StampsRegistry.BatchInfo[]",
        "numberOfBytes": "32"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_bytes32": {
        "encoding": "inplace",
        "label": "bytes32",
        "numberOfBytes": "32"
      },
      "t_contract(ISwarmContract)23": {
        "encoding": "inplace",
        "label": "contract ISwarmContract",
        "numberOfBytes": "20"
      },
      "t_mapping(t_address,t_array(t_struct(BatchInfo)78_storage)dyn_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => struct StampsRegistry.BatchInfo[])",
        "numberOfBytes": "32",
        "value": "t_array(t_struct(BatchInfo)78_storage)dyn_storage"
      },
      "t_mapping(t_bytes32,t_address)": {
        "encoding": "mapping",
        "key": "t_bytes32",
        "label": "mapping(bytes32 => address)",
        "numberOfBytes": "32",
        "value": "t_address"
      },
      "t_struct(BatchInfo)78_storage": {
        "encoding": "inplace",
        "label": "struct StampsRegistry.BatchInfo",
        "members": [
          {
            "astId": 61,
            "contract": "contracts/StampsRegistry.sol:StampsRegistry",
            "label": "batchId",
            "offset": 0,
            "slot": "0",
            "type": "t_bytes32"
          },
          {
            "astId": 63,
            "contract": "contracts/StampsRegistry.sol:StampsRegistry",
            "label": "totalAmount",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 65,
            "contract": "contracts/StampsRegistry.sol:StampsRegistry",
            "label": "normalisedBalance",
            "offset": 0,
            "slot": "2",
            "type": "t_uint256"
          },
          {
            "astId": 67,
            "contract": "contracts/StampsRegistry.sol:StampsRegistry",
            "label": "nodeAddress",
            "offset": 0,
            "slot": "3",
            "type": "t_address"
          },
          {
            "astId": 69,
            "contract": "contracts/StampsRegistry.sol:StampsRegistry",
            "label": "payer",
            "offset": 0,
            "slot": "4",
            "type": "t_address"
          },
          {
            "astId": 71,
            "contract": "contracts/StampsRegistry.sol:StampsRegistry",
            "label": "depth",
            "offset": 20,
            "slot": "4",
            "type": "t_uint8"
          },
          {
            "astId": 73,
            "contract": "contracts/StampsRegistry.sol:StampsRegistry",
            "label": "bucketDepth",
            "offset": 21,
            "slot": "4",
            "type": "t_uint8"
          },
          {
            "astId": 75,
            "contract": "contracts/StampsRegistry.sol:StampsRegistry",
            "label": "immutable_",
            "offset": 22,
            "slot": "4",
            "type": "t_bool"
          },
          {
            "astId": 77,
            "contract": "contracts/StampsRegistry.sol:StampsRegistry",
            "label": "timestamp",
            "offset": 0,
            "slot": "5",
            "type": "t_uint256"
          }
        ],
        "numberOfBytes": "192"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      },
      "t_uint8": {
        "encoding": "inplace",
        "label": "uint8",
        "numberOfBytes": "1"
      }
    }
  }
}